

CREATE TABLE public.userauth_user (
	"password" varchar(128) NOT NULL,
	last_login timestamptz NULL,
	is_superuser bool NOT NULL,
	username varchar(150) NOT NULL,
	first_name varchar(150) NOT NULL,
	last_name varchar(150) NOT NULL,
	is_staff bool NOT NULL,
	is_active bool NOT NULL,
	date_joined timestamptz NOT NULL,
	created_at timestamptz NOT NULL,
	updated_at timestamptz NOT NULL,
	id uuid NOT NULL,
	user_type varchar NOT NULL,
	email varchar(254) NOT NULL,
	CONSTRAINT userauth_user_email_key UNIQUE (email),
	CONSTRAINT userauth_user_pkey PRIMARY KEY (id),
	CONSTRAINT userauth_user_username_key UNIQUE (username)
);
CREATE INDEX userauth_user_email_526cefd9_like ON public.userauth_user USING btree (email varchar_pattern_ops);
CREATE INDEX userauth_user_username_31ec6e87_like ON public.userauth_user USING btree (username varchar_pattern_ops);




CREATE TABLE public.shop_region (
	id uuid NOT NULL,
	name varchar(200) NOT NULL,
	manager_id uuid NULL,
	CONSTRAINT shop_region_pkey PRIMARY KEY (id),
	CONSTRAINT shop_region_manager_id_88bac8dd_fk_userauth_user_id FOREIGN KEY (manager_id) REFERENCES public.userauth_user(id) DEFERRABLE INITIALLY DEFERRED
);
CREATE INDEX shop_region_manager_id_88bac8dd ON public.shop_region USING btree (manager_id);




CREATE TABLE public.shop_store (
	id uuid NOT NULL,
	address text NOT NULL,
	manager_id uuid NULL,
	region_id uuid NOT NULL,
	name varchar(150) NOT NULL,
	CONSTRAINT shop_store_pkey PRIMARY KEY (id),
	CONSTRAINT shop_store_manager_id_0c72b65b_fk_userauth_user_id FOREIGN KEY (manager_id) REFERENCES public.userauth_user(id) DEFERRABLE INITIALLY DEFERRED,
	CONSTRAINT shop_store_region_id_ed556233_fk_shop_region_id FOREIGN KEY (region_id) REFERENCES public.shop_region(id) DEFERRABLE INITIALLY DEFERRED
);
CREATE INDEX shop_store_manager_id_0c72b65b ON public.shop_store USING btree (manager_id);
CREATE INDEX shop_store_region_id_ed556233 ON public.shop_store USING btree (region_id);



CREATE TABLE public.userauth_address (
	created_at timestamptz NOT NULL,
	updated_at timestamptz NOT NULL,
	id uuid NOT NULL,
	user_id uuid NOT NULL,
	state varchar(100) NOT NULL,
	zip_code varchar(10) NOT NULL,
	street varchar(200) NOT NULL,
	city varchar(200) NOT NULL,
	CONSTRAINT userauth_address_pkey PRIMARY KEY (user_id),
	CONSTRAINT userauth_address_user_id_8f10cad9_fk_userauth_user_id FOREIGN KEY (user_id) REFERENCES public.userauth_user(id) DEFERRABLE INITIALLY DEFERRED
);


CREATE TABLE public.userauth_businessuser (
	created_at timestamptz NOT NULL,
	updated_at timestamptz NOT NULL,
	id uuid NOT NULL,
	user_id uuid NOT NULL,
	business_category varchar(100) NOT NULL,
	gross_annual_income numeric(20, 2) NOT NULL,
	CONSTRAINT userauth_businessuser_pkey PRIMARY KEY (user_id),
	CONSTRAINT userauth_businessuser_user_id_d707ea53_fk_userauth_user_id FOREIGN KEY (user_id) REFERENCES public.userauth_user(id) DEFERRABLE INITIALLY DEFERRED
);




CREATE TABLE public.userauth_homeuser (
	created_at timestamptz NOT NULL,
	updated_at timestamptz NOT NULL,
	id uuid NOT NULL,
	user_id uuid NOT NULL,
	marital_status varchar NOT NULL,
	gender varchar NOT NULL,
	age int4 NOT NULL,
	income numeric(20, 2) NOT NULL,
	CONSTRAINT userauth_homeuser_age_range CHECK (((age >= 18) AND (age <= 150))),
	CONSTRAINT userauth_homeuser_pkey PRIMARY KEY (user_id),
	CONSTRAINT userauth_homeuser_user_id_ed196d89_fk_userauth_user_id FOREIGN KEY (user_id) REFERENCES public.userauth_user(id) DEFERRABLE INITIALLY DEFERRED
);



CREATE TABLE public.userauth_salesuser (
	created_at timestamptz NOT NULL,
	updated_at timestamptz NOT NULL,
	id uuid NOT NULL,
	user_id uuid NOT NULL,
	job_title varchar(150) NOT NULL,
	income numeric(20, 2) NOT NULL,
	store_assigned_id uuid NULL,
	CONSTRAINT userauth_salesuser_pkey PRIMARY KEY (user_id),
	CONSTRAINT userauth_salesuser_store_assigned_id_0e179388_fk_shop_store_id FOREIGN KEY (store_assigned_id) REFERENCES public.shop_store(id) DEFERRABLE INITIALLY DEFERRED,
	CONSTRAINT userauth_salesuser_user_id_c0204e2c_fk_userauth_user_id FOREIGN KEY (user_id) REFERENCES public.userauth_user(id) DEFERRABLE INITIALLY DEFERRED
);
CREATE INDEX userauth_salesuser_store_assigned_id_0e179388 ON public.userauth_salesuser USING btree (store_assigned_id);



CREATE TABLE public.auth_group_permissions (
	id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
	group_id int4 NOT NULL,
	permission_id int4 NOT NULL,
	CONSTRAINT auth_group_permissions_group_id_permission_id_0cd325b0_uniq UNIQUE (group_id, permission_id),
	CONSTRAINT auth_group_permissions_pkey PRIMARY KEY (id),
	CONSTRAINT auth_group_permissio_permission_id_84c5c92e_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id) DEFERRABLE INITIALLY DEFERRED,
	CONSTRAINT auth_group_permissions_group_id_b120cbf9_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id) DEFERRABLE INITIALLY DEFERRED
);
CREATE INDEX auth_group_permissions_group_id_b120cbf9 ON public.auth_group_permissions USING btree (group_id);
CREATE INDEX auth_group_permissions_permission_id_84c5c92e ON public.auth_group_permissions USING btree (permission_id);


-- public.shop_product definition

-- Drop table

-- DROP TABLE public.shop_product;

CREATE TABLE public.shop_product (
	id uuid NOT NULL,
	name varchar(100) NOT NULL,
	inventory int4 NOT NULL,
	price numeric(10, 2) NOT NULL,
	category varchar(20) NOT NULL,
	store_id uuid NOT NULL,
	original_cost numeric(10, 2) NOT NULL,
	CONSTRAINT shop_product_pkey PRIMARY KEY (id),
	CONSTRAINT shop_product_store_id_a6f6a616_fk_shop_store_id FOREIGN KEY (store_id) REFERENCES public.shop_store(id) DEFERRABLE INITIALLY DEFERRED
);
CREATE INDEX shop_product_store_id_a6f6a616 ON public.shop_product USING btree (store_id);


CREATE TABLE public.shop_usertransaction (
	id uuid NOT NULL,
	purchased_by_id uuid NOT NULL,
	category varchar(20) NOT NULL,
	"comments" text NOT NULL,
	name varchar(100) NOT NULL,
	price numeric(10, 2) NOT NULL,
	product_id uuid NULL,
	quantity int4 NOT NULL,
	salesperson_id uuid NULL,
	CONSTRAINT shop_usertransaction_pkey PRIMARY KEY (id),
	CONSTRAINT shop_usertransaction_quantity_range CHECK (((quantity >= 1) AND (quantity <= 1000))),
	CONSTRAINT shop_usertransaction_product_id_a50b69aa_fk_shop_product_id FOREIGN KEY (product_id) REFERENCES public.shop_product(id) DEFERRABLE INITIALLY DEFERRED,
	CONSTRAINT shop_usertransaction_purchased_by_id_38414916_fk_userauth_ FOREIGN KEY (purchased_by_id) REFERENCES public.userauth_user(id) DEFERRABLE INITIALLY DEFERRED,
	CONSTRAINT shop_usertransaction_salesperson_id_1cbeace0_fk_userauth_ FOREIGN KEY (salesperson_id) REFERENCES public.userauth_salesuser(user_id) DEFERRABLE INITIALLY DEFERRED
);
CREATE INDEX shop_usertransaction_product_id_a50b69aa ON public.shop_usertransaction USING btree (product_id);
CREATE INDEX shop_usertransaction_purchased_by_id_38414916 ON public.shop_usertransaction USING btree (purchased_by_id);
CREATE INDEX shop_usertransaction_salesperson_id_1cbeace0 ON public.shop_usertransaction USING btree (salesperson_id);

